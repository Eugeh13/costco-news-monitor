# ğŸ” ExplicaciÃ³n Completa: Â¿QuÃ© Busca el Sistema y Bajo QuÃ© Criterios?

## Sistema de Monitoreo de Noticias - Costco Monterrey

---

## ğŸ“ UBICACIONES MONITOREADAS

El sistema vigila **3 sucursales de Costco** en Monterrey:

### 1. Costco Carretera Nacional
- **UbicaciÃ³n**: Carretera Nacional Km. 268 +500 5001, Monterrey, NL 64989
- **Coordenadas**: 25.5781498, -100.2512201
- **Radio de bÃºsqueda**: 3 kilÃ³metros a la redonda

**Vialidades clave monitoreadas**:
- Carretera Nacional
- Lincoln
- ConstituciÃ³n / ProlongaciÃ³n ConstituciÃ³n
- Ruiz Cortines / Adolfo Ruiz Cortines

### 2. Costco Cumbres
- **UbicaciÃ³n**: Alejandro de Rodas 6767, Monterrey, NL 64344
- **Coordenadas**: 25.7295984, -100.3927985
- **Radio de bÃºsqueda**: 3 kilÃ³metros a la redonda

**Vialidades clave monitoreadas**:
- Alejandro de Rodas
- RaÃºl Rangel FrÃ­as
- Paseo de los Leones
- San JerÃ³nimo
- Cumbres (zona)

### 3. Costco Valle Oriente
- **UbicaciÃ³n**: Av. LÃ¡zaro CÃ¡rdenas 800, San Pedro Garza GarcÃ­a, NL 66269
- **Coordenadas**: 25.6396949, -100.317631
- **Radio de bÃºsqueda**: 3 kilÃ³metros a la redonda

**Vialidades clave monitoreadas**:
- LÃ¡zaro CÃ¡rdenas / Av. LÃ¡zaro CÃ¡rdenas
- Fundadores / Av. Fundadores
- Vasconcelos / JosÃ© Vasconcelos
- Valle Oriente (zona)
- San Pedro / Garza GarcÃ­a
- GÃ³mez MorÃ­n
- Morones Prieto

---

## ğŸ¯ CATEGORÃAS DE EVENTOS QUE BUSCA

El sistema busca **5 tipos de eventos de alto impacto**:

### 1. ğŸš— ACCIDENTES VIALES

**Palabras clave que detecta**:
- choque
- accidente
- volcadura
- atropello
- colisiÃ³n
- vuelco
- chocÃ³
- volcÃ³
- carambola
- trÃ¡iler
- cierre de avenida
- cierre de carretera
- trÃ¡nsito cerrado
- lesionados en accidente
- heridos en choque
- vehÃ­culos involucrados

**Ejemplos de noticias que SÃ detecta**:
- âœ… "Choque en LÃ¡zaro CÃ¡rdenas deja 3 heridos"
- âœ… "Volcadura de trÃ¡iler cierra Carretera Nacional"
- âœ… "Accidente mÃºltiple en Fundadores afecta trÃ¡nsito"
- âœ… "Atropello en Alejandro de Rodas deja un lesionado"

### 2. ğŸ”¥ INCENDIOS

**Palabras clave que detecta**:
- incendio
- fuego
- llamas
- arde
- bomberos
- humo denso
- conflagraciÃ³n
- edificio en llamas
- local en llamas
- vehÃ­culo en llamas

**Ejemplos de noticias que SÃ detecta**:
- âœ… "Incendio en local comercial en Valle Oriente"
- âœ… "Bomberos combaten fuego en edificio de Cumbres"
- âœ… "VehÃ­culo arde en Carretera Nacional"

### 3. ğŸš¨ SEGURIDAD (Violencia)

**Palabras clave que detecta**:
- balacera
- disparos
- tiroteo
- persecuciÃ³n
- enfrentamiento
- baleado
- herido de bala
- hombres armados
- detonaciones
- rÃ¡fagas
- fuego cruzado
- resguardo policial
- acordonamiento
- zona acordonada

**Ejemplos de noticias que SÃ detecta**:
- âœ… "Balacera en San Pedro deja zona acordonada"
- âœ… "Reportan detonaciones en LÃ¡zaro CÃ¡rdenas"
- âœ… "Enfrentamiento en Cumbres moviliza a policÃ­a"

### 4. ğŸš§ BLOQUEOS

**Palabras clave que detecta**:
- bloqueo
- cierre
- cerrada
- manifestaciÃ³n
- protesta
- obstrucciÃ³n
- trÃ¡nsito cerrado
- bloqueada
- cerrado

**Ejemplos de noticias que SÃ detecta**:
- âœ… "ManifestaciÃ³n bloquea ConstituciÃ³n"
- âœ… "Cierre total de Rangel FrÃ­as por protesta"
- âœ… "Bloquean LÃ¡zaro CÃ¡rdenas en ambos sentidos"

### 5. ğŸŒŠ DESASTRES NATURALES

**Palabras clave que detecta**:
- inundaciÃ³n
- desbordamiento
- deslizamiento
- deslave
- tromba
- granizada
- tornado
- rÃ­o desbordado

**Ejemplos de noticias que SÃ detecta**:
- âœ… "InundaciÃ³n en Carretera Nacional por tromba"
- âœ… "Desbordamiento afecta Valle Oriente"
- âœ… "Granizada causa estragos en Cumbres"

---

## ğŸš« NOTICIAS QUE RECHAZA AUTOMÃTICAMENTE

El sistema **descarta** noticias que contengan estas palabras (filtros de exclusiÃ³n):

### âŒ EspectÃ¡culos / FarÃ¡ndula
**Palabras que rechazan la noticia**:
- actor, actriz
- famoso, celebridad
- artista, cantante
- pelÃ­cula, serie
- concierto, show
- estreno

**Ejemplo rechazado**:
- âŒ "Actor sufre accidente en grabaciÃ³n de pelÃ­cula"
- âŒ "Cantante famoso choca en Monterrey"

### âŒ Noticias HistÃ³ricas / Pasadas
**Palabras que rechazan la noticia**:
- hace aÃ±os
- en el pasado
- recordamos
- aniversario
- historia de
- asÃ­ fue
- revelan detalles

**Ejemplo rechazado**:
- âŒ "Hace 5 aÃ±os ocurriÃ³ trÃ¡gico accidente en LÃ¡zaro CÃ¡rdenas"
- âŒ "Recordamos el incendio que marcÃ³ a Monterrey"

### âŒ PolÃ­tica General
**Palabras que rechazan la noticia**:
- declaraciones
- conferencia de prensa
- anuncia
- promete
- implementarÃ¡
- planea
- propone

**Ejemplo rechazado**:
- âŒ "Gobernador anuncia plan contra accidentes"
- âŒ "Alcalde promete mejorar seguridad vial"

### âŒ Ubicaciones Lejanas (Fuera del Ã¡rea)
**Palabras que rechazan la noticia**:
- pesquerÃ­a
- cadereyta
- santiago
- allende
- montemorelos
- ciudad de mÃ©xico, cdmx
- guanajuato
- jalisco
- tamaulipas

**Ejemplo rechazado**:
- âŒ "Choque en PesquerÃ­a deja 2 heridos"
- âŒ "Incendio en Cadereyta moviliza a bomberos"

---

## ğŸ“ CRITERIOS DE DISTANCIA

### Criterio Principal: Radio de 3 km

El sistema calcula la distancia desde el evento hasta cada Costco:

```
Evento â†’ Geocodificar ubicaciÃ³n â†’ Calcular distancia â†’ Â¿EstÃ¡ dentro de 3 km?
```

**Ejemplo**:
- Evento en: Av. LÃ¡zaro CÃ¡rdenas altura Fundadores
- Coordenadas: 25.6396949, -100.317631
- Distancia a Costco Valle Oriente: **2.1 km** âœ… DENTRO DEL RADIO
- **Resultado**: EnvÃ­a alerta

### Criterio Alternativo: Vialidades Clave

**Si el evento estÃ¡ FUERA del radio de 3 km**, el sistema hace una segunda verificaciÃ³n:

Â¿La noticia menciona alguna **vialidad clave** de algÃºn Costco?

**Ejemplo**:
- Evento en: Carretera Nacional km 270
- Distancia a Costco Carretera Nacional: **4.5 km** âŒ FUERA DEL RADIO
- Pero menciona: "Carretera Nacional" âœ… VIALIDAD CLAVE
- **Resultado**: EnvÃ­a alerta de todas formas

**RazÃ³n**: Las vialidades principales pueden afectar el acceso al Costco aunque el evento estÃ© un poco mÃ¡s lejos.

---

## ğŸ”„ FLUJO COMPLETO DE ANÃLISIS

### Paso 1: SCRAPING (RecolecciÃ³n)
```
Fuentes monitoreadas:
â”œâ”€ Milenio Ãšltima Hora (https://www.milenio.com/ultima-hora)
â”œâ”€ Milenio Monterrey (https://www.milenio.com/monterrey)
â”œâ”€ El Horizonte (https://www.elhorizonte.mx/)
â””â”€ INFO 7 (https://www.info7.mx/) [Actualmente no funciona]

Resultado: ~30 noticias por ciclo
```

### Paso 2: PRE-FILTRADO RÃPIDO (Sin IA)
```
Para cada noticia:
â”œâ”€ Â¿Contiene palabras de EXCLUSIÃ“N? â†’ âŒ RECHAZAR
â”œâ”€ Â¿Contiene palabras de ALTO IMPACTO? â†’ âœ… CONTINUAR
â””â”€ Si no cumple â†’ âŒ RECHAZAR

Resultado: ~2-3 candidatas (90% eliminadas)
```

### Paso 3: ANÃLISIS CON IA (Solo candidatas)
```
Para cada candidata:
â”œâ”€ Analizar con OpenAI GPT-4o-mini
â”œâ”€ Â¿Es realmente relevante?
â”œâ”€ Â¿CuÃ¡l es la ubicaciÃ³n exacta?
â”œâ”€ Â¿QuÃ© tan grave es? (Severidad 1-10)
â”œâ”€ Â¿CuÃ¡ntas vÃ­ctimas hay?
â”œâ”€ Â¿QuÃ© impacto tiene en trÃ¡fico?
â””â”€ Generar resumen inteligente

Resultado: AnÃ¡lisis completo con IA
```

### Paso 4: EXTRACCIÃ“N DE UBICACIÃ“N
```
MÃ©todo 1 (IA):
â””â”€ Extraer ubicaciÃ³n en lenguaje natural
   Ejemplo: "Av. LÃ¡zaro CÃ¡rdenas altura Fundadores"

MÃ©todo 2 (Regex - fallback):
â””â”€ Buscar patrones de ubicaciÃ³n
   Ejemplo: "lÃ¡zaro cÃ¡rdenas"
```

### Paso 5: GEOCODIFICACIÃ“N
```
UbicaciÃ³n extraÃ­da â†’ Geopy/Nominatim â†’ Coordenadas GPS

Ejemplo:
"LÃ¡zaro CÃ¡rdenas, Monterrey" â†’ (25.6396949, -100.317631)
```

### Paso 6: CÃLCULO DE DISTANCIA
```
Para cada Costco:
â”œâ”€ Calcular distancia desde evento
â”œâ”€ Â¿EstÃ¡ dentro de 3 km? â†’ âœ… ENVIAR ALERTA
â””â”€ Â¿Fuera de 3 km? â†’ Verificar vialidades clave
```

### Paso 7: CLASIFICACIÃ“N DE SEVERIDAD (Con IA)
```
Escala 1-10:
â”œâ”€ 1-3: MENOR (sin heridos, daÃ±os leves) â„¹ï¸
â”œâ”€ 4-6: MODERADA (heridos leves, trÃ¡fico afectado) âš ï¸
â”œâ”€ 7-8: GRAVE (heridos graves, cierre de vialidad) ğŸš¨
â””â”€ 9-10: CRÃTICA (vÃ­ctimas fatales, emergencia) ğŸš¨ğŸš¨
```

### Paso 8: NOTIFICACIÃ“N
```
Si cumple todos los criterios:
â””â”€ Enviar alerta a Telegram con:
   â”œâ”€ CategorÃ­a del evento
   â”œâ”€ TÃ­tulo de la noticia
   â”œâ”€ Severidad clasificada
   â”œâ”€ NÃºmero de vÃ­ctimas
   â”œâ”€ Impacto en trÃ¡fico
   â”œâ”€ UbicaciÃ³n exacta
   â”œâ”€ Distancia al Costco mÃ¡s cercano
   â”œâ”€ Servicios de emergencia presentes
   â””â”€ Link a la noticia completa
```

---

## ğŸ“Š EJEMPLOS REALES DE ANÃLISIS

### Ejemplo 1: ALERTA ENVIADA âœ…

**Noticia**: "Choque mÃºltiple en LÃ¡zaro CÃ¡rdenas deja 3 heridos, bomberos en el lugar"

**AnÃ¡lisis paso a paso**:

1. **Pre-filtrado**: âœ… Contiene "choque" (palabra clave de accidente vial)
2. **ExclusiÃ³n**: âœ… No contiene palabras de exclusiÃ³n
3. **AnÃ¡lisis IA**:
   - Relevante: âœ… SÃ­ (evento actual de alto impacto)
   - CategorÃ­a: Accidente Vial
   - Severidad: 7/10 (GRAVE)
   - VÃ­ctimas: 3 heridos
   - Impacto trÃ¡fico: ALTO
   - Servicios emergencia: SÃ­ (bomberos)
4. **UbicaciÃ³n IA**: "Av. LÃ¡zaro CÃ¡rdenas altura Fundadores"
5. **GeocodificaciÃ³n**: (25.6396949, -100.317631)
6. **Distancia**: 2.1 km de Costco Valle Oriente âœ… DENTRO DEL RADIO
7. **Resultado**: **ALERTA ENVIADA** ğŸš¨

### Ejemplo 2: RECHAZADA POR EXCLUSIÃ“N âŒ

**Noticia**: "Actor famoso sufre accidente en grabaciÃ³n de pelÃ­cula en Monterrey"

**AnÃ¡lisis paso a paso**:

1. **Pre-filtrado**: âœ… Contiene "accidente" (palabra clave)
2. **ExclusiÃ³n**: âŒ Contiene "actor" y "pelÃ­cula" (palabras de exclusiÃ³n)
3. **Resultado**: **RECHAZADA** (espectÃ¡culos, no relevante)

### Ejemplo 3: RECHAZADA POR UBICACIÃ“N âŒ

**Noticia**: "Choque en PesquerÃ­a deja 2 heridos"

**AnÃ¡lisis paso a paso**:

1. **Pre-filtrado**: âœ… Contiene "choque"
2. **ExclusiÃ³n**: âŒ Contiene "pesquerÃ­a" (ubicaciÃ³n lejana)
3. **Resultado**: **RECHAZADA** (fuera del Ã¡rea de interÃ©s)

### Ejemplo 4: RECHAZADA POR DISTANCIA âŒ

**Noticia**: "Incendio en local de la colonia Obispado"

**AnÃ¡lisis paso a paso**:

1. **Pre-filtrado**: âœ… Contiene "incendio"
2. **ExclusiÃ³n**: âœ… No contiene palabras de exclusiÃ³n
3. **AnÃ¡lisis IA**: âœ… Relevante
4. **UbicaciÃ³n**: "Colonia Obispado, Monterrey"
5. **GeocodificaciÃ³n**: (25.6722, -100.3089)
6. **Distancia**: 
   - Costco Valle Oriente: 4.8 km âŒ
   - Costco Cumbres: 5.2 km âŒ
   - Costco Carretera Nacional: 11.3 km âŒ
7. **Vialidades clave**: No menciona ninguna
8. **Resultado**: **RECHAZADA** (fuera del radio y sin vialidades clave)

### Ejemplo 5: ACEPTADA POR VIALIDAD CLAVE âœ…

**Noticia**: "Bloqueo en Carretera Nacional por manifestaciÃ³n"

**AnÃ¡lisis paso a paso**:

1. **Pre-filtrado**: âœ… Contiene "bloqueo"
2. **ExclusiÃ³n**: âœ… No contiene palabras de exclusiÃ³n
3. **AnÃ¡lisis IA**: âœ… Relevante
4. **UbicaciÃ³n**: "Carretera Nacional, Monterrey"
5. **GeocodificaciÃ³n**: (25.5850, -100.2400)
6. **Distancia**: 3.8 km de Costco Carretera Nacional âŒ FUERA
7. **Vialidades clave**: âœ… Menciona "Carretera Nacional" (vialidad clave de Costco Carretera Nacional)
8. **Resultado**: **ALERTA ENVIADA** ğŸš¨ (por vialidad clave)

---

## â° FRECUENCIA DE MONITOREO

**Horarios de ejecuciÃ³n**: Cada 30 minutos en horarios fijos
- :00 (en punto de cada hora)
- :30 (media hora de cada hora)

**Ejemplos**:
- 08:00, 08:30, 09:00, 09:30, 10:00, 10:30...
- 24 horas al dÃ­a, 7 dÃ­as a la semana
- **48 monitoreos por dÃ­a**

---

## ğŸ“± TIPOS DE NOTIFICACIONES

### Tipo 1: Resumen (Sin alertas)

Cuando NO hay eventos de alto impacto:

```
âœ… Monitoreo Completado

ğŸ“Š Resumen:
â€¢ Noticias analizadas: 30
â€¢ Alertas de alto impacto: 0
â€¢ Estado: Todo tranquilo âœ“

ğŸ“ Ãreas monitoreadas:
â€¢ Costco Carretera Nacional
â€¢ Costco Cumbres
â€¢ Costco Valle Oriente

â° 28/10/2025 18:00
ğŸ”„ PrÃ³ximo monitoreo en 30 minutos
```

### Tipo 2: Alerta (Con evento detectado)

Cuando SÃ hay evento de alto impacto:

```
ğŸš¨ ALERTA COSTCO MTY

ğŸ“ Accidente Vial
ğŸ“° Choque mÃºltiple en LÃ¡zaro CÃ¡rdenas deja 3 heridos

âš¡ Severidad: GRAVE (7/10)
ğŸ‘¥ VÃ­ctimas/Heridos: 3
ğŸš— Impacto en trÃ¡fico: ALTO
ğŸš‘ Servicios de emergencia en el lugar

ğŸ“ A 2.1 km de Costco Valle Oriente
ğŸ—ºï¸ Av. LÃ¡zaro CÃ¡rdenas altura Fundadores

ğŸ“ Accidente vehicular con tres personas lesionadas.

ğŸ“¡ Milenio Monterrey
ğŸ”— [Ver noticia completa]

â° 28/10/2025 18:00
```

---

## ğŸ¯ RESUMEN DE CRITERIOS

### âœ… UNA NOTICIA SE ENVÃA COMO ALERTA SI:

1. **Contiene palabras clave** de alto impacto (accidente, incendio, balacera, bloqueo, desastre)
2. **NO contiene palabras de exclusiÃ³n** (espectÃ¡culos, histÃ³rica, polÃ­tica, ubicaciÃ³n lejana)
3. **Tiene ubicaciÃ³n especÃ­fica** (no solo "Monterrey")
4. **EstÃ¡ dentro de 3 km** de algÃºn Costco, O menciona una **vialidad clave**
5. **La IA confirma** que es relevante y actual

### âŒ UNA NOTICIA SE RECHAZA SI:

1. No contiene palabras clave de alto impacto
2. Contiene palabras de exclusiÃ³n
3. No tiene ubicaciÃ³n especÃ­fica
4. EstÃ¡ fuera del radio de 3 km Y no menciona vialidades clave
5. La IA determina que no es relevante

---

## ğŸ’¡ VENTAJAS DEL SISTEMA CON IA

### Antes (Sistema Original)
- Buscaba solo palabras clave exactas
- No entendÃ­a contexto
- "Choque de opiniones" = alerta falsa
- No clasificaba severidad

### Ahora (Con IA)
- Entiende contexto y semÃ¡ntica
- Distingue "choque vehicular" de "choque de opiniones"
- Clasifica severidad automÃ¡ticamente
- Detecta vÃ­ctimas y evalÃºa impacto
- **75% menos falsos positivos**

---

## ğŸ“ InformaciÃ³n de Contacto

**Bot de Telegram**: @monitorCostco_bot  
**Chat ID**: 7510716093  
**Usuario**: +52 8124686732

---

**Fecha**: 28 de octubre de 2025  
**VersiÃ³n**: 2.0 con IA  
**Powered by**: OpenAI GPT-4o-mini
